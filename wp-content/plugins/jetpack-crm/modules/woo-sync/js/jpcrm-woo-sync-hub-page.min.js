/*! For license information please see jpcrm-woo-sync-hub-page.min.js.LICENSE.txt */
(()=>{var t={782:t=>{function jpcrm_woosync_initiate_sync(){jQuery("#jpcrm_failed_ajax").hide(),jQuery("#jpcrm_firing_ajax").addClass("active"),jpcrm_woosync_fire_sync((function(t){jQuery("#jpcrm_failed_ajax").hide();let e=1e3,n=-1,o=-1;if(void 0!==t.status){switch(t.last_order_synced&&(document.getElementById("jpcrm-woosync-stat-last-order-synced").innerHTML=t.last_order_synced),t.contacts_synced&&(document.getElementById("jpcrm-woosync-stat-contacts-synced").innerHTML=t.contacts_synced),t.transactions_synced&&(document.getElementById("jpcrm-woosync-stat-transactions-synced").innerHTML=t.transactions_synced),t.transaction_total&&(document.getElementById("jpcrm-woosync-stat-transaction-total").innerHTML=t.transaction_total),t.status){case"job_in_progress":void 0===window.jpcrm_woosync_sync_blocked_runs&&(window.jpcrm_woosync_sync_blocked_runs=0),window.jpcrm_woosync_sync_blocked_runs++,e=1e4;break;case"sync_part_complete":document.getElementById("jpcrm-woosync-status-short-text").textContent=t.status_short_text+" ("+Math.round(t.percentage_completed)+"%)";break;case"sync_completed":return jQuery("#jpcrm_firing_ajax").removeClass("active"),document.getElementById("jpcrm-woosync-status-icon").className="icon thumbs up green",document.getElementById("jpcrm-woosync-status-short-text").textContent=t.status_short_text,void(document.getElementById("jpcrm-woosync-status-long-text").textContent=t.status_long_text);case"not_in_ready_mode":case"error":return jQuery("#jpcrm_firing_ajax").removeClass("active"),jQuery("#jpcrm_failed_ajax").show(),document.getElementById("jpcrm-woosync-status-icon").className="icon settings orange",document.getElementById("jpcrm-woosync-status-short-text").textContent=t.status_short_text,document.getElementById("jpcrm-woosync-status-short-text").className="status orange",void(document.getElementById("jpcrm-woosync-status-long-text").textContent=t.status_long_text)}void 0!==t.remaining_pages&&(n=parseInt(t.remaining_pages)),void 0!==t.percentage_completed&&(o=t.percentage_completed);let s="";n>0&&(s=jpcrm_woosync_language_label("pages_remain","{0} pages remain").format(n)),o>0&&(s+=" ("+Math.round(o)+"%)"),""!==s&&jQuery("#jpcrm_firing_ajax").attr("title",s);let c="",r="";void 0===window.jpcrm_woosync_sync_blocked_runs||window.jpcrm_woosync_sync_blocked_runs<10?jpcrm_sleep(e).then((()=>{jpcrm_woosync_initiate_sync()})):(c="caught_mid_job",r=jpcrm_woosync_language_label(c,"Import job is running in the back end. If this message is still shown after some time, please contact support."),jQuery("#jpcrm_firing_ajax").removeClass("active"),document.getElementById("jpcrm-woosync-status-short-text").textContent=c,document.getElementById("jpcrm-woosync-status-long-text").textContent=r)}}),(function(t){let e="",n="";if("timeout"==t.statusText)e="caught_mid_job",n=jpcrm_woosync_language_label(e,"Import job is running in the back end. If this message is still shown after some time, please contact support.");else{if(0==t.status&&"error"==t.statusText)return;e="server_error",n=jpcrm_woosync_language_label(e,"There was a general server error.")+" ("+t.status+")",document.getElementById("jpcrm-woosync-status-icon").className="icon thumbs down red",document.getElementById("jpcrm-woosync-status-short-text").className="status red"}jQuery("#jpcrm_firing_ajax").removeClass("active"),document.getElementById("jpcrm-woosync-status-short-text").textContent=e,document.getElementById("jpcrm-woosync-status-long-text").textContent=n}))}function jpcrm_woosync_fire_sync(t,e){if(!window.jpcrm_woosync_firing_sync){window.jpcrm_woosync_firing_sync=!0;const n={action:"jpcrm_woosync_fire_sync_job",sec:window.jpcrm_woosync_nonce};jQuery.ajax({type:"POST",url:ajaxurl,data:n,dataType:"json",timeout:2e4,success:function(e){window.jpcrm_woosync_firing_sync=!1,"function"==typeof t&&t(e)},error:function(t){window.jpcrm_woosync_firing_sync=!1,"function"==typeof e&&e(t)}})}}function jpcrm_woosync_language_label(t,e){return void 0!==window.jpcrm_woosync_language_labels&&void 0!==window.jpcrm_woosync_language_labels[t]?window.jpcrm_woosync_language_labels[t]:void 0===e?"":e}jQuery((function(){if(window.jpcrm_woo_connect_initiate_ajax_sync){jpcrm_woosync_initiate_sync();const t=new URL(location);t.searchParams.delete("definitely_restart_sync"),history.replaceState(null,null,t)}jQuery(".jpcrm-clickable").on("click",(function(){const t=jQuery(this).attr("data-href");t&&window.open(t,"_blank").trigger("focus")}))})),String.prototype.format||(String.prototype.format=function(){const t=arguments;return this.replace(/{(\d+)}/g,(function(e,n){return void 0!==t[n]?t[n]:e}))}),t.exports={jpcrm_woosync_initiate_sync:jpcrm_woosync_initiate_sync,jpcrm_woosync_fire_sync:jpcrm_woosync_fire_sync,jpcrm_woosync_language_label:jpcrm_woosync_language_label}}},e={};var n=function __webpack_require__(n){var o=e[n];if(void 0!==o)return o.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,__webpack_require__),s.exports}(782),o=window="undefined"==typeof window?{}:window;for(var s in n)o[s]=n[s];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();