/*! For license information please see ZeroBSCRM.admin.transactioneditor.min.js.LICENSE.txt */
(()=>{var n={3:n=>{function zbscrmjs_build_custInv_dropdown(n,e){let i=jQuery("#invoice_id").val();n?(jQuery("#invoiceFieldWrap").append(zbscrm_js_uiSpinnerBlocker()),zbscrm_js_getCustInvs(n,(function(n){let i='<select id="invoice_id" name="invoice_id" class="form-control">';n.length>0?(i+='<option value="" disabled="disabled"',(void 0===e||e<=0)&&(i+=' selected="selected"'),i+=">"+zeroBSCRMJS_transEditLang("selectinv","Select Invoice")+"</option>",i+='<option value="">'+zeroBSCRMJS_transEditLang("none","None")+"</option>",jQuery.each(n,(function(n,o){let t="",r=-1;r=o.id,t="#"+o.id,void 0!==o.id_override&&(t+=" - "+o.id_override),void 0!==o.meta&&(void 0!==o.meta.val&&(t+=" ("+window.zbs_root.currencyOptions.currencyStr+o.meta.val+")"),void 0!==o.meta.date&&(t+=" - "+o.meta.date)),i+='<option value="'+r+'"',void 0!==e&&r==e&&(i+=' selected="selected"'),i+=">"+jpcrm.esc_html(t)+"</option>"}))):i+='<option value="" disabled="disabled" selected="selected">'+zeroBSCRMJS_transEditLang("noinvoices","None Found")+"</option>",i+="</select>",jQuery("#invoiceFieldWrap").html(i),jQuery(".assignInvToCust").show(),setTimeout((function(){zeroBSCRMJS_bindInvSelect()}),0)}),(function(){jQuery(".assignInvToCust").hide();let n=i;n||(n=""),jQuery("#invoiceFieldWrap").html('<input style="max-width:200px;" id="invoice_id" name="invoice_id" value="'+n+'" class="form-control">')}))):(jQuery(".assignInvToCust").show(),i||(i=""),jQuery("#invoiceFieldWrap").html('<input style="max-width:200px;" id="invoice_id" name="invoice_id" value="'+i+'" class="form-control">'),setTimeout((function(){zeroBSCRMJS_bindInvSelect()}),0))}function zeroBSCRMJS_bindInvSelect(){jQuery("#invoice_id").on("change",(function(){zeroBSCRMJS_showInvLinkIf()})),zeroBSCRMJS_showInvLinkIf()}function zeroBSCRMJS_showInvLinkIf(){jQuery("#invoiceSelectionTitle .zbs-view-invoice").remove();let n=jQuery("#invoiceFieldWrap select").val();if(null!=n&&""!==n&&(n=parseInt(n),n>0)){let n='<div class="ui right floated mini animated button zbs-view-invoice" style="margin-left:0.5em">';n+='<div class="visible content">'+zeroBSCRMJS_transEditLang("view","View")+"</div>",n+='<div class="hidden content">',n+='<i class="icon file text"></i>',n+="</div>",n+="</div>",jQuery("#invoiceSelectionTitle").prepend(n),zeroBSCRMJS_bindInvLinkIf()}}function zeroBSCRMJS_bindInvLinkIf(){jQuery("#invoiceSelectionTitle .zbs-view-invoice").off("click").on("click",(function(){const n=parseInt(jQuery("#invoiceFieldWrap select").val()),e=window.zeroBSCRMJS_transactionedit_links.editinvprefix+n;window.open(e,"_parent")}))}function zeroBSCRMJS_showContactLinkIf(n){if(jQuery("#zbs-customer-title .zbs-view-contact").remove(),jQuery("#zbs-transaction-learn-nav .zbs-trans-quicknav-contact").remove(),null!=n&&""!==n&&(n=parseInt(n))>0){const e=window.zbsObjectViewLinkPrefixCustomer+n;let i='<div class="ui right floated mini animated button zbs-view-contact">';i+='<div class="visible content">'+zeroBSCRMJS_transEditLang("view","View")+"</div>",i+='<div class="hidden content">',i+='<i class="user icon"></i>',i+="</div>",i+="</div>",jQuery("#zbs-customer-title").prepend(i);const o='<a target="_blank" style="margin-left:6px;" class="zbs-trans-quicknav-contact ui icon button black mini labeled" href="'+e+'"><i class="user icon"></i> '+zeroBSCRMJS_transEditLang("contact","Contact")+"</a>";jQuery("#zbs-transaction-learn-nav").append(o),zeroBSCRMJS_bindContactLinkIf()}}function zeroBSCRMJS_bindContactLinkIf(){jQuery("#zbs-customer-title .zbs-view-contact").off("click").on("click",(function(){let n=parseInt(jQuery("#customer").val());if(null!=n&&""!==n&&(n=parseInt(n),n>0)){const e=window.zbsObjectViewLinkPrefixCustomer+n;window.open(e,"_parent")}}))}function zeroBSCRMJS_showCompanyLinkIf(n){if(jQuery("#zbs-company-title .zbs-view-company").remove(),jQuery("#zbs-transaction-learn-nav .zbs-trans-quicknav-company").remove(),null!=n&&""!==n&&(n=parseInt(n))>0){let e='<div class="ui right floated mini animated button zbs-view-company">';e+='<div class="visible content">'+zeroBSCRMJS_transEditLang("view","View")+"</div>",e+='<div class="hidden content">',e+='<i class="building icon"></i>',e+="</div>",e+="</div>",jQuery("#zbs-company-title").prepend(e);const i='<a target="_blank" style="margin-left:6px;" class="zbs-trans-quicknav-company ui icon button black mini labeled" href="'+window.zeroBSCRMJS_transactionedit_links.editcompanyprefix+n+'"><i class="building icon"></i> '+zeroBSCRMJS_transEditLang("company","Company")+"</a>";jQuery("#zbs-transaction-learn-nav").append(i),zeroBSCRMJS_bindCompanyLinkIf()}}function zeroBSCRMJS_bindCompanyLinkIf(){jQuery("#zbs-company-title .zbs-view-company").off("click").on("click",(function(){let n=parseInt(jQuery("#zbsct_company").val());if(null!=n&&""!==n&&(n=parseInt(n),n>0)){const e=window.zeroBSCRMJS_transactionedit_links.editcompanyprefix+n;window.open(e,"_parent")}}))}function zeroBSCRMJS_transEditLang(n,e=""){return void 0!==window.zeroBSCRMJS_transactionedit_lang[n]?window.zeroBSCRMJS_transactionedit_lang[n]:e}jQuery((function(){if(jQuery("#customer").val()){let n=!1;jQuery("#invoice_id").val()&&(n=jQuery("#invoice_id").val()),zbscrmjs_build_custInv_dropdown(jQuery("#customer").val(),n)}setTimeout((function(){zeroBSCRMJS_showInvLinkIf(),zeroBSCRMJS_showContactLinkIf(jQuery("#customer").val()),zeroBSCRMJS_showCompanyLinkIf(jQuery("#zbsct_company").val())}),0)})),n.exports={zbscrmjs_transaction_unsetCustomer:function(n){void 0!==n&&n||(jQuery("#customer").val(""),jQuery("#customer_name").val(""),jQuery(".assignInvToCust, #invoiceFieldWrap").hide(),setTimeout((function(){zeroBSCRMJS_showContactLinkIf("")}),0))},zbscrmjs_transaction_unsetCompany:function(n){void 0!==n&&n||(jQuery("#zbsct_company").val(""),setTimeout((function(){zeroBSCRMJS_showCompanyLinkIf("")}),0))},zbscrmjs_transaction_setCustomer:function(n){void 0!==n.id?(jQuery("#customer").val(n.id),jQuery("#customer_name").val(n.name),zbscrmjs_build_custInv_dropdown(n.id)):(jQuery("#customer").val(""),jQuery("#customer_name").val("")),setTimeout((function(){zeroBSCRMJS_showContactLinkIf(n.id)}),0)},zbscrmjs_transaction_setCompany:function(n){void 0!==n.id?jQuery("#zbsct_company").val(n.id):jQuery("#zbsct_company").val(""),setTimeout((function(){zeroBSCRMJS_showCompanyLinkIf(n.id)}),0)},zbscrmjs_build_custInv_dropdown:zbscrmjs_build_custInv_dropdown,zeroBSCRMJS_bindInvSelect:zeroBSCRMJS_bindInvSelect,zeroBSCRMJS_showInvLinkIf:zeroBSCRMJS_showInvLinkIf,zeroBSCRMJS_bindInvLinkIf:zeroBSCRMJS_bindInvLinkIf,zeroBSCRMJS_showContactLinkIf:zeroBSCRMJS_showContactLinkIf,zeroBSCRMJS_bindContactLinkIf:zeroBSCRMJS_bindContactLinkIf,zeroBSCRMJS_showCompanyLinkIf:zeroBSCRMJS_showCompanyLinkIf,zeroBSCRMJS_bindCompanyLinkIf:zeroBSCRMJS_bindCompanyLinkIf,zeroBSCRMJS_transEditLang:zeroBSCRMJS_transEditLang}}},e={};var i=function __webpack_require__(i){var o=e[i];if(void 0!==o)return o.exports;var t=e[i]={exports:{}};return n[i](t,t.exports,__webpack_require__),t.exports}(3),o=window="undefined"==typeof window?{}:window;for(var t in i)o[t]=i[t];i.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();