/*! For license information please see jpcrm-admin-tasks.min.js.LICENSE.txt */
(()=>{var e={};window.jpcrm_task_ajax_blocker=!1;const t=document.querySelectorAll("#mark-complete-task button");t.forEach((e=>e.addEventListener("click",(function(a){a.preventDefault();!function(e,a){if(0===e||window.jpcrm_task_ajax_blocker)return;window.jpcrm_task_ajax_blocker=!0,t.forEach((e=>e.classList.add("disabled","loading")));const n={action:"mark_task_complete",taskID:e,status:a,sec:window.zbs_root.zbsnonce};fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(n).toString()}).then((e=>{if(200!==e.status)throw Error("Error updating task status!");return e.json()})).then((e=>{document.getElementById("zbs-task-complete").value=e.data.status,t.forEach((t=>t.classList.toggle("hidden",+t.dataset.status!==e.data.status)))})).catch((e=>{console.log(e)})).finally((()=>{t.forEach((e=>e.classList.remove("disabled","loading"))),window.jpcrm_task_ajax_blocker=!1}))}(e.closest('[id^="task-"]').id.slice(5),-document.getElementById("zbs-task-complete").value)})))),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("calendar");if(!e)return;new FullCalendar.Calendar(e,{locale:jpcrm_fullcalendar_data.locale,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek timeGridDay,listMonth"},initialView:"dayGridMonth",navLinks:!0,weekends:!0,firstDay:jpcrm_fullcalendar_data.firstDay,events:jpcrm_fullcalendar_data.events,eventContent:e=>{const t=e.event._def.extendedProps,a=t.avatar?'<img class="jpcrm-avatar" src="'+jpcrm.esc_attr(t.avatar)+'"/>':"",n=1===t.complete?'<i class="fa fa-check"></i></span>':"",r=e.event.title?jpcrm.decodeHTMLEntities(e.event.title):"";let o=jpcrm.esc_html(r);"listMonth"!==e.view.type&&(o=e.timeText+" "+o);let s=a+n+o;return s='<div class="event_html" title="'+jpcrm.esc_attr(r)+'">'+s+"</div>","listMonth"===e.view.type&&(s='<a href="'+jpcrm.esc_attr(e.event._def.url)+'">'+s+"</a>"),{html:s}}}).render()}));var a=window="undefined"==typeof window?{}:window;for(var n in e)a[n]=e[n];e.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();