/*! For license information please see ZeroBSCRM.admin.dash.min.js.LICENSE.txt */
(()=>{var t={512:t=>{const a=zbs_root.jp_green[40],e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1,text:""}},scales:{y:{display:!0,beginAtZero:!0}}};document.getElementById("bar-chart")&&new Chart(document.getElementById("bar-chart"),{type:"bar",data:{labels:jpcrm_revenue_chart_data.labels,datasets:[{label:"",backgroundColor:a,data:jpcrm_revenue_chart_data.data}]},options:e}),window.dash_security=document.getElementById("zbs_dash_count_security").value;const r=document.getElementById("growth-chart");if(r){window.contactChart=new Chart(r,{type:"bar",data:{labels:"",datasets:[{label:"",backgroundColor:a,data:""}]},options:e});const t=document.querySelectorAll(".day-or-month .button");t.forEach((a=>a.addEventListener("click",(a=>{const e=a.target.dataset.range;t.forEach((t=>{t.classList.toggle("black",t.dataset.range===e),t.classList.toggle("white",t.dataset.range!==e)})),window[e]&&jetpackcrm_draw_contact_chart(window[e])}))))}function cb(t,a){const e=zbsJS_admcolours.colors[0];jQuery("#reportrange span").html(t.format("MMM D Y")+" - "+a.format("MMM D Y"));const r=t.format("Y-MM-DD"),n=a.format("Y-MM-DD");jQuery(".loading").css("color",e).show();const c={action:"jetpackcrm_dash_refresh",start_date:r,end_date:n,security:window.dash_security},o=jQuery.ajax({url:ajaxurl,type:"POST",data:c,dataType:"json"});o.done((function(t){window.yearly=t.chart.yearly,window.monthly=t.chart.monthly,window.weekly=t.chart.weekly,window.daily=t.chart.daily;let a="";for(let e=0;e<t.summary.length;e++){const r=t.summary[e];a+=`\n\t\t\t\t<jpcrm-dashcount-card>\n\t\t\t\t\t<h3>${r.label}</h3>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span class="range_total">+${r.range_total}</span>\n\t\t\t\t\t\t<span class="alltime_total">${r.alltime_total_str}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href="${r.link}">${zeroBSCRMJS_globViewLang("viewall")}</a>\n\t\t\t\t</jpcrm-dashcount-card>\n\t\t\t\t`}document.querySelector("jpcrm-dashcount").innerHTML=a,window.contactChart&&jetpackcrm_draw_contact_chart(t.chart.monthly)})),o.fail((function(){}))}function jetpackcrm_draw_contact_chart(t){window.contactChart.data.labels=t.labels,window.contactChart.data.datasets[0].data=t.data,window.contactChart.update()}jQuery("#jpcrm_dash_page_options").on("click",(function(){document.querySelector(".dashboard-custom-choices").classList.toggle("hidden")})),jQuery(".dashboard-custom-choices input").on("click",(function(){const t=jQuery(this).attr("id");jQuery("#"+t+"_display").toggle();let a=0;jQuery("#"+t).is(":checked")&&(a=1);const e={action:"zbs_dash_setting",is_checked:a,the_setting:t,security:jQuery("#zbs_dash_setting_security").val()};jQuery.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",timeout:2e4,success:function(){},error:function(){}})})),cb(moment().subtract(1,"year"),moment()),jpcrm_js_bind_daterangepicker({maxDate:moment()},cb),window.jpcrm_show_first_use_dash&&(jQuery("#jpcrm-first-use-dash").modal("show").modal("refresh"),jQuery(".jpcrm-modal-close").on("click",(function(){jQuery("#jpcrm-first-use-dash").modal("hide")})));const n=document.getElementById("jpcrm_sales_funnel");jpcrm_build_funnel(jpcrm_funnel_data,n),t.exports={jetpackcrm_draw_contact_chart:jetpackcrm_draw_contact_chart}}},a={};var e=function __webpack_require__(e){var r=a[e];if(void 0!==r)return r.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,__webpack_require__),n.exports}(512),r=window="undefined"==typeof window?{}:window;for(var n in e)r[n]=e[n];e.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();